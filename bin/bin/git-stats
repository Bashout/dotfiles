#!/bin/sh

read -rd '' AWK_SCRIPT << 'EOF'
# function r(s) { printf "\033[0;31m%s\033[0m", s }
# function g(s) { printf "\033[0;32m%s\033[0m", s }
# function o(s) { printf "\033[0;33m%s\033[0m", s }

{
    add += $1;
    subs += $2;
    net += $1 - $2
}
END {
    # printf "Added: %s | Removed: %s | Net: %s", add, subs, net
    printf "Added: \033[0;32m%s\033[0m | Removed: \033[0;31m%s\033[0m | Net: \033[0;33m%s\033[0m\n", add, subs, net
}
EOF

for i in "$@"; do
    printf "%s | " "$i"
    git log --author="$i" --pretty=tformat: --numstat | awk "$AWK_SCRIPT" -
done
